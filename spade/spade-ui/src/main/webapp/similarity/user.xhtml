<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<h:panelGrid columns="2" cellspacing="10">
		<h:outputLabel for="author" value="Name:" />
		<h:outputText id="author" value="#{userAction.user.name}" />

		<h:outputLabel for="numReviews" value="Reviews:" />
		<h:outputText id="numReviews"
			value="#{userAction.user.numberOfReviews}" />

		<h:outputLabel for="helpful" value="Helpful Votes:" />
		<h:outputText id="helpful" value="#{userAction.user.helpfulVotes}" />

		<h:outputLabel for="overall" value="Overall Votes:" />
		<h:outputText id="overall"
			value="#{userAction.user.helpfulOverallVotes}" />

		<c:if test="#{userAction.user.helpfulOverallVotes > 0}">
			<h:outputLabel for="overallPercent" value="Helpfulnes:" />
			<h:outputText id="overallPercent"
				value="#{userAction.user.helpfulVotes / userAction.user.helpfulOverallVotes}">
				<f:convertNumber type="percent" />
			</h:outputText>
		</c:if>

		<h:outputLabel for="hIndex" value="hIndex:" />
		<h:outputText id="hIndex" value="#{userAction.user.HIndex}" />

		<h:outputLabel for="length" value="Length:" />
		<h:outputText id="length" value="#{userAction.user.length}" />

	</h:panelGrid>

	<h:form>
		<a
			href="http://www.amazon.com/gp/cdp/member-reviews/#{userAction.user.id}"
			target="_blank"> <input type="button"
			value="User Page on Amazon.com" />
		</a>

		<h:commandButton action="#{similaritiesAction.switchUserViewBack()}"
			value="Back to Overview" />
	</h:form>

	<h:form id="form">
		<p:dataTable var="review" value="#{userAction.reviews}">

			<p:column headerText="Product" sortBy="#{product.name}">
				<h:outputLink value="http://amazon.com/dp/#{review.product.id}"
					target="_blank">
					<h:outputText value="#{review.product.name}" />
				</h:outputLink>
			</p:column>

			<p:column headerText="Category" sortBy="#{category}">
				<h:outputText value="#{review.product.category}" />
			</p:column>

			<p:column headerText="Date" sortBy="#{reviewDate}">
				<h:outputText value="#{review.reviewDate}">
					<f:convertDateTime type="date" pattern="dd.MM.yyyy" />
				</h:outputText>
			</p:column>

			<p:column headerText="User Rating" sortBy="#{rating}">
				<h:outputText value="#{review.rating}" />
			</p:column>

			<p:column headerText="Rating" sortBy="#{product.rating}">
				<h:outputText value="#{review.product.rating}" />
			</p:column>

			<p:column style="width:24px">
				<p:commandLink update=":dlgForm:dialog"
					oncomplete="PF('documentDialog').show()" title="Review"
					styleClass="ui-icon ui-icon-search">
					<f:setPropertyActionListener value="#{review}"
						target="#{userAction.selectedReview}" />
				</p:commandLink>
			</p:column>

		</p:dataTable>
	</h:form>

	<h:form id="dlgForm">
		<p:dialog id="dialog" header="Review" showEffect="fade"
			widgetVar="documentDialog" modal="false" resizable="true" width="600">
			<h:outputText value="#{userAction.reviewForDialog}" />
		</p:dialog>
	</h:form>

</ui:composition>